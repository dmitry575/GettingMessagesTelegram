2022-09-29 21:48:26,877 WARN  (null) Validation - Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development. 
2022-09-29 21:48:27,064 INFO  (null) Infrastructure - Entity Framework Core 6.0.9 initialized 'MessagesContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:6.0.7+5b98e4b74de93b590b44aef8dd7967c03acc433c' with options: SensitiveDataLoggingEnabled DetailedErrorsEnabled  
2022-09-29 21:48:27,407 INFO  (null) Command - Executed DbCommand (37ms) [Parameters=[], CommandType='Text', CommandTimeout='300']
REVOKE CONNECT ON DATABASE telegram FROM PUBLIC;
SELECT pg_terminate_backend(pg_stat_activity.pid) FROM pg_stat_activity WHERE datname = 'telegram'; 
2022-09-29 21:48:27,489 INFO  (null) Command - Executed DbCommand (77ms) [Parameters=[], CommandType='Text', CommandTimeout='300']
DROP DATABASE telegram; 
2022-09-29 21:48:28,685 INFO  (null) Command - Executed DbCommand (1,145ms) [Parameters=[], CommandType='Text', CommandTimeout='300']
CREATE DATABASE telegram; 
2022-09-29 21:48:28,801 INFO  (null) Command - Executed DbCommand (20ms) [Parameters=[], CommandType='Text', CommandTimeout='300']
CREATE TABLE "Channels" (
    "Id" bigint GENERATED BY DEFAULT AS IDENTITY,
    "BaseId" bigint NOT NULL,
    "Author" text NULL,
    "HashAccess" bigint NOT NULL,
    "DateCreated" timestamp without time zone NOT NULL,
    "MessagesCount" bigint NOT NULL,
    CONSTRAINT "PK_Channels" PRIMARY KEY ("Id")
); 
2022-09-29 21:48:28,826 INFO  (null) Command - Executed DbCommand (20ms) [Parameters=[], CommandType='Text', CommandTimeout='300']
CREATE TABLE "Messages" (
    "Id" bigint GENERATED BY DEFAULT AS IDENTITY,
    "BaseId" bigint NOT NULL,
    "Author" text NULL,
    "Content" text NULL,
    "DateCreated" timestamp without time zone NOT NULL,
    "ViewCount" bigint NOT NULL,
    "CommentCount" integer NOT NULL,
    "ChannelId" bigint NOT NULL,
    CONSTRAINT "PK_Messages" PRIMARY KEY ("Id"),
    CONSTRAINT "FK_Messages_Channels_ChannelId" FOREIGN KEY ("ChannelId") REFERENCES "Channels" ("Id") ON DELETE CASCADE
); 
2022-09-29 21:48:28,849 INFO  (null) Command - Executed DbCommand (18ms) [Parameters=[], CommandType='Text', CommandTimeout='300']
CREATE TABLE "Comments" (
    "Id" bigint GENERATED BY DEFAULT AS IDENTITY,
    "BaseId" bigint NOT NULL,
    "Author" text NULL,
    "Content" text NULL,
    "DateCreated" timestamp without time zone NOT NULL,
    "MessageId" bigint NOT NULL,
    CONSTRAINT "PK_Comments" PRIMARY KEY ("Id"),
    CONSTRAINT "FK_Comments_Messages_MessageId" FOREIGN KEY ("MessageId") REFERENCES "Messages" ("Id") ON DELETE CASCADE
); 
2022-09-29 21:48:28,865 INFO  (null) Command - Executed DbCommand (9ms) [Parameters=[], CommandType='Text', CommandTimeout='300']
CREATE INDEX "IX_Comments_MessageId" ON "Comments" ("MessageId"); 
2022-09-29 21:48:28,878 INFO  (null) Command - Executed DbCommand (9ms) [Parameters=[], CommandType='Text', CommandTimeout='300']
CREATE INDEX "IX_Messages_ChannelId" ON "Messages" ("ChannelId"); 
2022-09-29 21:48:28,935 INFO  (null) Lifetime - Application started. Press Ctrl+C to shut down. 
2022-09-29 21:48:28,938 INFO  (null) Lifetime - Hosting environment: Production 
2022-09-29 21:48:28,940 INFO  (null) Lifetime - Content root path: K:\source\repos\GettingMessagesTelegram\src\bin\Debug\net6.0 
2022-09-29 21:48:29,590 INFO  (null) ReceiveService - Loggin by: Dmitry 
2022-09-29 21:49:07,229 INFO  (null) Command - Executed DbCommand (16ms) [Parameters=[@__baseId_0='1101806611'], CommandType='Text', CommandTimeout='300']
SELECT c."Id", c."Author", c."BaseId", c."DateCreated", c."HashAccess", c."MessagesCount"
FROM "Channels" AS c
WHERE c."BaseId" = @__baseId_0
LIMIT 1 
2022-09-29 21:49:07,430 INFO  (null) Command - Executed DbCommand (9ms) [Parameters=[@p0='boris_rozhin', @p1='1101806611', @p2='2022-09-29T18:49:07.2442334Z' (DbType = DateTime), @p3='6504238671879902293', @p4='0'], CommandType='Text', CommandTimeout='300']
INSERT INTO "Channels" ("Author", "BaseId", "DateCreated", "HashAccess", "MessagesCount")
VALUES (@p0, @p1, @p2, @p3, @p4)
RETURNING "Id"; 
2022-09-29 21:49:07,521 INFO  (null) ReceiveService - reading messages from channel: 1101806611 
2022-09-29 21:50:00,557 WARN  (null) Validation - Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development. 
2022-09-29 21:50:00,728 INFO  (null) Infrastructure - Entity Framework Core 6.0.9 initialized 'MessagesContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:6.0.7+5b98e4b74de93b590b44aef8dd7967c03acc433c' with options: SensitiveDataLoggingEnabled DetailedErrorsEnabled  
2022-09-29 21:50:00,964 INFO  (null) Command - Executed DbCommand (32ms) [Parameters=[], CommandType='Text', CommandTimeout='300']
REVOKE CONNECT ON DATABASE telegram FROM PUBLIC;
SELECT pg_terminate_backend(pg_stat_activity.pid) FROM pg_stat_activity WHERE datname = 'telegram'; 
2022-09-29 21:50:01,036 INFO  (null) Command - Executed DbCommand (67ms) [Parameters=[], CommandType='Text', CommandTimeout='300']
DROP DATABASE telegram; 
2022-09-29 21:50:02,067 INFO  (null) Command - Executed DbCommand (984ms) [Parameters=[], CommandType='Text', CommandTimeout='300']
CREATE DATABASE telegram; 
2022-09-29 21:50:02,179 INFO  (null) Command - Executed DbCommand (21ms) [Parameters=[], CommandType='Text', CommandTimeout='300']
CREATE TABLE "Channels" (
    "Id" bigint GENERATED BY DEFAULT AS IDENTITY,
    "BaseId" bigint NOT NULL,
    "Author" text NULL,
    "HashAccess" bigint NOT NULL,
    "DateCreated" timestamp without time zone NOT NULL,
    "MessagesCount" bigint NOT NULL,
    CONSTRAINT "PK_Channels" PRIMARY KEY ("Id")
); 
2022-09-29 21:50:02,204 INFO  (null) Command - Executed DbCommand (19ms) [Parameters=[], CommandType='Text', CommandTimeout='300']
CREATE TABLE "Messages" (
    "Id" bigint GENERATED BY DEFAULT AS IDENTITY,
    "BaseId" bigint NOT NULL,
    "Author" text NULL,
    "Content" text NULL,
    "DateCreated" timestamp without time zone NOT NULL,
    "ViewCount" bigint NOT NULL,
    "CommentCount" integer NOT NULL,
    "ChannelId" bigint NOT NULL,
    CONSTRAINT "PK_Messages" PRIMARY KEY ("Id"),
    CONSTRAINT "FK_Messages_Channels_ChannelId" FOREIGN KEY ("ChannelId") REFERENCES "Channels" ("Id") ON DELETE CASCADE
); 
2022-09-29 21:50:02,226 INFO  (null) Command - Executed DbCommand (18ms) [Parameters=[], CommandType='Text', CommandTimeout='300']
CREATE TABLE "Comments" (
    "Id" bigint GENERATED BY DEFAULT AS IDENTITY,
    "BaseId" bigint NOT NULL,
    "Author" text NULL,
    "Content" text NULL,
    "DateCreated" timestamp without time zone NOT NULL,
    "MessageId" bigint NOT NULL,
    CONSTRAINT "PK_Comments" PRIMARY KEY ("Id"),
    CONSTRAINT "FK_Comments_Messages_MessageId" FOREIGN KEY ("MessageId") REFERENCES "Messages" ("Id") ON DELETE CASCADE
); 
2022-09-29 21:50:02,246 INFO  (null) Command - Executed DbCommand (14ms) [Parameters=[], CommandType='Text', CommandTimeout='300']
CREATE INDEX "IX_Comments_MessageId" ON "Comments" ("MessageId"); 
2022-09-29 21:50:02,258 INFO  (null) Command - Executed DbCommand (9ms) [Parameters=[], CommandType='Text', CommandTimeout='300']
CREATE INDEX "IX_Messages_ChannelId" ON "Messages" ("ChannelId"); 
2022-09-29 21:50:02,324 INFO  (null) Lifetime - Application started. Press Ctrl+C to shut down. 
2022-09-29 21:50:02,327 INFO  (null) Lifetime - Hosting environment: Production 
2022-09-29 21:50:02,329 INFO  (null) Lifetime - Content root path: K:\source\repos\GettingMessagesTelegram\src\bin\Debug\net6.0 
2022-09-29 21:50:02,696 INFO  (null) ReceiveService - Loggin by: Dmitry 
2022-09-29 21:50:04,426 INFO  (null) Command - Executed DbCommand (15ms) [Parameters=[@__baseId_0='1101806611'], CommandType='Text', CommandTimeout='300']
SELECT c."Id", c."Author", c."BaseId", c."DateCreated", c."HashAccess", c."MessagesCount"
FROM "Channels" AS c
WHERE c."BaseId" = @__baseId_0
LIMIT 1 
2022-09-29 21:50:04,564 INFO  (null) Command - Executed DbCommand (8ms) [Parameters=[@p0='boris_rozhin', @p1='1101806611', @p2='2022-09-29T18:50:04.4372302Z' (DbType = DateTime), @p3='6504238671879902293', @p4='0'], CommandType='Text', CommandTimeout='300']
INSERT INTO "Channels" ("Author", "BaseId", "DateCreated", "HashAccess", "MessagesCount")
VALUES (@p0, @p1, @p2, @p3, @p4)
RETURNING "Id"; 
2022-09-29 21:50:04,604 INFO  (null) ReceiveService - reading messages from channel: 1101806611 
